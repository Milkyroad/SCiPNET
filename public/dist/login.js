"use strict";(self.webpackChunkscipnet_terminal=self.webpackChunkscipnet_terminal||[]).push([[966],{3621:(e,t,a)=>{a.r(t),a.d(t,{loginProcess:()=>o});var s=a(7025);window.emailLog="",window.passLog="",window.keyLog="";const o=e=>{"quit"==e.trim().toLowerCase()?(emailLog="",passLog="",keyLog="",(0,s.oG)(),(0,s.s8)("Login process exited"),loginState=0):1==loginState?((0,s.ZD)(),firebase.auth().fetchSignInMethodsForEmail(e).then((t=>{t.length?(emailLog=e,(0,s.s8)(`The email address you have entered is:<span class='highlight'> ${e}</span><br><hr><small style='opacity:0.7'>Enter "Y" to continue or "N" to re-enter your email. You can exit the login process at any time by entering "Quit".</small>`),loginState=2):((0,s.hS)('THIS EMAIL IS NOT REGISTERED. PLEASE ENTER ANOTHER EMAIL OR YOU CAN CHOOSE TO REGISTER <br><hr><small style=\'opacity:0.7\'>If you wish to register, enter "Quit" to exit the login process. After that, enter "Register" to register.</small>'),loginState=1),(0,s.GV)()})).catch((e=>{(0,s.GV)(),(0,s.hS)(`${String(e).toUpperCase()}<br><hr><small style='opacity:0.7'>PLEASE TRY AGAIN.</small>`),loginState=1}))):2==loginState?"y"==e.trim().toLowerCase()?((0,s.s8)("Please enter your password"),loginState=3):"n"==e.trim().toLowerCase()?((0,s.s8)("Please enter your email again"),loginState=1):((0,s.hS)('UNRECOGNISED INPUT, PLEASE ENTER "Y", "N" OR "Quit"'),loginState=2):3==loginState?((0,s.ZD)(),passLog=e,$d.append('<blockquote id="waitingToAdd">Authenticating user...</blockquote>'),(0,s.$6)(),firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then((()=>firebase.auth().signInWithEmailAndPassword(emailLog,passLog).then((e=>{reloadInfo(),5==clearance&&""!=keyphrase?(keyLog=keyphrase,firebase.auth().signOut().then((()=>{holder=defaultHolder,(0,s.P9)('You are attempting to log into an account with a Level 5 Security Clearance. To safeguard the Foundation\'s internal confidential documents, SCiPNET has blocked your request. Please enter the corresponding personal authorization keyphrase to unlock and access your account.<br><hr><small style="opacity:0.7">Hack: Enter "Answer" to retrieve your personal authorization keyphrase.</small>'),(0,s.GV)(),loginState=4}))):((0,s.s8)(`Login successful - <span class="highlight">Welcome back, ${displayName}</span>`),(0,s.GV)(),(0,s.oG)(),loginState=0)})).catch((e=>{"auth/wrong-password"==e.code?((0,s.hS)("PASSWORD INVALID, PLEASE ENTER YOUR PASSWORD AGAIN"),loginState=3):((0,s.hS)(`${e.message.toUpperCase()}<br><hr><small style='opacity:0.7'>PLEASE ENTER YOUR EMAIL AGAIN OR YOU CAN CHOOSE TO EXIT BY ENTERING "Quit".</small>`),loginState=1),(0,s.GV)()}))))):4==loginState&&(e==keyLog?($("#input").val(""),(0,s.ZD)(),firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then((()=>firebase.auth().signInWithEmailAndPassword(emailLog,passLog).then((e=>{reloadInfo(),(0,s.s8)(`Authentication accepted. <span class="highlight">Welcome back, ${displayName}</span>`),(0,s.GV)(),(0,s.oG)(),loginState=0,keyLog=""}))))):"answer"==e.toLowerCase().trim()?((0,s.s8)('Your personal authorization keyphrase is: "<span class="highlight">'+keyLog+'</span>"'),$("#input").val(keyLog)):(0,s.hS)("INCORRECT AUTHENTICATION KEYPHRASE"))}}}]);